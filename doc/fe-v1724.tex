\section{Введение}

Приложение \FE{} является фронтендом для дигитайзера \DEVICE{} в системе сбора данных \MIDAS{} (стр.~\pageref{sec-midas-frontend}). Назначение приложения~--- управление дигитайзером и чтение wave-форм с него.

В целом, принцип работы и конфигурация данного приложения совпадают с фронтендом для CAEN~V1720 (стр.~\pageref{sec-fe-v1720}). Поэтому в данном разделе будут рассмотрены только отличия, характерные для \DEVICE{}.

\section{Настройка параметров работы в ODB}

Параметры работы \DEVICE{} задаются в следующем разделе базы данных ODB:

\medskip

{\tt /Equipment/v1724{\it xx}}

\medskip

\noindent где $xx$~--- двузначный номер устройства, отсутствующий в случае наличия единственного устройства данного типа.

\subsection{Специфичные параметры}

Специфичные параметры работы \DEVICE{} задаются в следующем разделе базы данных ODB:

\medskip

{\tt /Equipment/v1724{\it xx}/Settings}

\medskip

В целом, назначение параметров аналогично параметрам фронтенда для V1720 (стр.~\pageref{sec-v1720-specific-params}). Ниже в данном разделе приведено описание только отличающихся параметров:

\begin{itemize}

\item \ODBNODE{waveform\_length} --- длина wave-форм в сэмплах. Допустимые значения: от 0 до 524288 ($2^{19})$. Рекомендуется использовать значения, являющиеся степенями~2, например 512, 1024 и т.~д. В этом случае внутренняя память \DEVICE{} используется оптимальным образом.

\item \ODBNODE{channel\_dc\_offset} --- сдвиг уровня аналогового сигнала (\TERM{DC Offset}) \cite{CaenUM3248AIS} по каждому из каналов. Диапазон значений: от 0 до 65535. Значение 0 соответствует диапазону $-2.25 \div 0$~В. Значение 32768 соответствует диапазону $-1.125 \div 1.125$~В. Значение 65535 соответствует диапазону $0 \div 2.25$~В. 

\item \ODBNODE{trigger\_threshold} --- пороговые уровни триггерных импульсов для каждого из каналов. Допустимые значения: от 0 до 16383.

\end{itemize}

\section{Формат результирующих данных}

Приложение \FE{} формирует отдельное событие (стр.~\pageref{sec-midas-event}) при каждом полезном срабывании триггера. Событие включает в себя следующие банки данных:

\begin{itemize}

\item \BANK{V240}~--- общая информация о событии;
\item \BANK{TRIG}~--- параметры триггера;
\item \BANK{CHDC}~--- значения DC offset для каналов дигитайзера на момент формирования события;
\item \BANK{WF00}~..~\BANK{WF07}~--- wave-формы с нулевого по седьмой каналы.

\end{itemize}

Формат банков аналогичен форматам банков для фронтенда \APP{fe-v1720} (стр.~\pageref{sec_v1720_event}). Отличие только в наличии банка \BANK{V240}, специфичного для \DEVICE{}.

\subsection{Банк \BANK{V240}}
\label{sec_v1724_bank_info}

Данный банк содержит общую информацию о событии. Формат банка аналогичен формату банка \BANK{V200} для фронтенда \APP{fe-v1720} (стр.~\pageref{sec_bank_info}), он состоит из 32-битных беззнаковых слов. Их назначение приведено в таблице~\ref{tab-info-bank}.

Наличие банка \BANK{V240} в событии служит индикатором того, что событие пришло от устройства \DEVICE{}.
